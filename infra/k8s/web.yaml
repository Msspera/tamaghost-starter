
apiVersion: apps/v1
kind: Deployment
metadata: { name: web, namespace: tamaghost }
spec:
  replicas: 2
  selector: { matchLabels: { app: web } }
  template:
    metadata: { labels: { app: web } }
    spec:
      containers:
        - name: web
          image: <ocir>/<repo>/tamaghost-web:latest
          env:
            - { name: NEXT_PUBLIC_API_INTERACTIONS_URL, value: "https://<api-domain>/interactions" }
            - { name: NEXT_PUBLIC_API_PET_URL, value: "https://<api-domain>/pet" }
            - { name: NEXT_PUBLIC_API_COMMENTS_URL, value: "https://<api-domain>/comments" }
            - { name: NEXT_PUBLIC_API_LEADERBOARD_URL, value: "https://<api-domain>/leaderboard" }
            - { name: NEXT_PUBLIC_WS_URL, value: "wss://<chat-domain>" }
            - { name: NEXT_PUBLIC_ASSET_BASE_URL, value: "https://objectstorage.<region>.oraclecloud.com/n/<ns>/b/<bucket>/o" }
          ports: [{ containerPort: 3000 }]
---
apiVersion: v1
kind: Service
metadata: { name: web, namespace: tamaghost }
spec:
  selector: { app: web }
  ports: [{ name: http, port: 80, targetPort: 3000 }]
  type: LoadBalancer
